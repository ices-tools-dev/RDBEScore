<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>01a Data import • RDBEScore</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="01a Data import">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RDBEScore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/v01a-data-import.html">01a Data import</a></li>
    <li><a class="dropdown-item" href="../articles/v01b-manipulating-rdbesdataobjects.html">01b Manipulating RDBESDataObjects</a></li>
    <li><a class="dropdown-item" href="../articles/v02a-generating-probabilities.html">02a Generating probabilities</a></li>
    <li><a class="dropdown-item" href="../articles/v02b-Generating-zeros-for-species-not-observed.html">02b Generating zeros for species not observed</a></li>
    <li><a class="dropdown-item" href="../articles/v02c-Generating-NAs-for-species-not-targeted-by-sampling.html">02c Generating NAs for species not targeted by sampling</a></li>
    <li><a class="dropdown-item" href="../articles/v02d-update-SA-with-taxon-from-SL.html">02d Update SA with taxon from SL</a></li>
    <li><a class="dropdown-item" href="../articles/v03a-Estimating-population-parameters-unbiased-estimator.html">03a Estimating population parameters: unbiased estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v03b-Estimating-population-parameters-ratio-estimator.html">03b Estimating population parameters: ratio estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v04-Create-IC-format-from-estimation-results.html">04 Create IC format from estimation results</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ices-tools-dev/RDBEScore/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>01a Data import</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ices-tools-dev/RDBEScore/blob/main/vignettes/v01a-data-import.Rmd" class="external-link"><code>vignettes/v01a-data-import.Rmd</code></a></small>
      <div class="d-none name"><code>v01a-data-import.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of this document is to outline the basic workflow of
importing data downloaded from the <a href="https://rdbes.ices.dk/#/" class="external-link">ICES Regional Database &amp; Estimation
System (RDBES)</a> or a <code>list</code> object containing data frames
(or data.tables) into <code>R</code> using the <code>RDBEScore</code>
package.</p>
<p>The function <strong>createRDBESDataObject</strong> is intended to
directly import Commercial Landing (CL), Commercial Effort (CE) and
Commercial Sampling (CS) tables downloaded from <a href="https://rdbes.ices.dk/#/" class="external-link">RDBES</a>.</p>
</div>
<div class="section level2">
<h2 id="load-the-package">Load the package<a class="anchor" aria-label="anchor" href="#load-the-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ices-tools-dev/RDBEScore" class="external-link">RDBEScore</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#the directory holding the data to import</span></span>
<span><span class="va">dataDir</span> <span class="op">&lt;-</span> <span class="st">"./yourDataDirectory/"</span></span>
<span></span>
<span><span class="co">#for demonstration purposes we will use the example data included in the package</span></span>
<span><span class="va">dataDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"RDBEScore"</span><span class="op">)</span>, <span class="st">"/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-zipped-files">Importing zipped files<a class="anchor" aria-label="anchor" href="#importing-zipped-files"></a>
</h2>
<p>It can directly import the <code>.zip</code> archive from the RDBES
download containing all mandatory hierarchy tables plus VD and SL:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedH1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"H1_Example.zip"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedH1</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedH1</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "DE" "SD" "VS" "FT" "FO" "SS" "SA" "FM" "BV" "VD" "SL" "IS"</span></span></code></pre></div>
<p>The easiest way to get a glimpse of the imported data hierarchy and
single table row counts is just to print it. The information also
includes the range of number sampled and number total for each table
together with the selection method and number of rows.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calls the print function </span></span>
<span><span class="va">importedH1</span></span>
<span><span class="co">#&gt; Hierarchy 1 RDBESdataObject:</span></span>
<span><span class="co">#&gt;  DE: 8</span></span>
<span><span class="co">#&gt;  SD: 8</span></span>
<span><span class="co">#&gt;  VS: 1214 (SRSWOR,CENSUS,SRSWR: 2-135/4-1382)</span></span>
<span><span class="co">#&gt;  FT: 1430 (CENSUS,SRSWR: 1-3/1-100)</span></span>
<span><span class="co">#&gt;  FO: 1916 (CENSUS,SRSWR: 1-3/1-20)</span></span>
<span><span class="co">#&gt;  SS: 1916 (CENSUS,SRSWR: 1/1-4)</span></span>
<span><span class="co">#&gt;  SA: 1916 (CENSUS,SRSWR: 1/1-2)</span></span>
<span><span class="co">#&gt;  FM: 7290</span></span>
<span><span class="co">#&gt;  BV: 14580 (SRSWR: 2/2)</span></span>
<span><span class="co">#&gt;  VD: 311</span></span>
<span><span class="co">#&gt;  SL: 6</span></span>
<span><span class="co">#&gt;  IS: 25</span></span></code></pre></div>
<p>It can import the CL, CE, VD or SL tables <code>.zip</code> archives,
but will include all other tables as <code>NULL</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"HSL_Example.zip"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="va">importedSL</span></span>
<span><span class="co">#&gt; No hierarchy, RDBESdataObject:</span></span>
<span><span class="co">#&gt;  SL: 6</span></span>
<span><span class="co">#&gt;  IS: 25</span></span></code></pre></div>
<p>It can also handle overwriting <code>zip</code> file original files
with files appearing later in the list. However each overwrite results
in a warning!</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importFiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"HSL_Example.zip"</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"H1_Example.zip"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">importedTables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">importFiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in FUN(X[[i]], ...): Duplicate unzipped files detected:</span></span>
<span><span class="co">#&gt;  IndividualSpeciesInSpeciesList.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  SpeciesList.csv</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedTables</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedTables</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "DE" "SD" "VS" "FT" "FO" "SS" "SA" "FM" "BV" "VD" "SL" "IS"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-csv-files">Importing csv files<a class="anchor" aria-label="anchor" href="#importing-csv-files"></a>
</h2>
<p>It can also import the unzipped <code>.csv</code> files with the
default RDBES names:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedVS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dataDir</span>,</span>
<span>                                    listOfFileNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"VS"</span> <span class="op">=</span> <span class="st">"VesselSelection.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedVS</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedVS</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "VS"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-list-of-data-frames">Importing list of data frames<a class="anchor" aria-label="anchor" href="#importing-list-of-data-frames"></a>
</h2>
<p>It can also import a <code>list</code> object containing data frames
(or data.tables). However, it should be noted that this type of import
bypasses the RDBES upload data integrity checks.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#list of data frames </span></span>
<span><span class="va">listOfDfsH1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"H1_Example.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#print the class of the list elements </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">listOfDfsH1</span>, <span class="va">class</span><span class="op">)</span></span>
<span><span class="co">#&gt;           DE           SD           VS           FT           FO           SS </span></span>
<span><span class="co">#&gt; "data.frame" "data.frame" "data.frame" "data.frame" "data.frame" "data.frame" </span></span>
<span><span class="co">#&gt;           SA           FM           BV           VD           SL           IS </span></span>
<span><span class="co">#&gt; "data.frame" "data.frame" "data.frame" "data.frame" "data.frame" "data.frame"</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span><span class="va">listOfDfsH1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in createRDBESDataObject(listOfDfsH1): NOTE: Creating RDBES data objects from a list of local data frames or data.tables bypasses the RDBES upload data integrity checks.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="object-class-rdbesdataobject">Object class RDBESDataObject<a class="anchor" aria-label="anchor" href="#object-class-rdbesdataobject"></a>
</h2>
<p>It should be noted that the objects created are of the S3 class
“<strong>RDBESDataObject</strong>”. The class has defined
<strong>print()</strong>, <strong>summary()</strong> and
<strong>sort()</strong> methods. For more info on theese see vignette <a href="manipulating-rdbesdataobjects.html">Manipulating
RDBESDataObjects</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedTables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dataDir</span>,<span class="st">"H1_Example.zip"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">importedTables</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "RDBESDataObject" "list"</span></span></code></pre></div>
<div class="section level3">
<h3 id="validate-rdbesdataobject">validate RDBESDataObject<a class="anchor" aria-label="anchor" href="#validate-rdbesdataobject"></a>
</h3>
<p>RDBESDataObject structure can be validated using the
<strong>validateRDBESDataObject()</strong> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/validateRDBESDataObject.html">validateRDBESDataObject</a></span><span class="op">(</span><span class="va">importedTables</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Note that TE is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [2] "Note that LO is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [3] "Note that OS is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [4] "Note that LE is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [5] "Note that CL is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [6] "Note that CE is NULL but this is allowed in an RDBESDataObject"</span></span></code></pre></div>
<p>To see what you can do with the imported
<strong>RDBESDataObject</strong> see other vignettes like <a href="01b-manipulating-rdbesdataobjects.html">01b Manipulating
RDBESDataObjects</a>.</p>
<p>See also other package vignettes:</p>
<ul>
<li><a href="v01a-data-import.html">v01a data import</a></li>
<li><a href="v01b-manipulating-rdbesdataobjects.html">v01b manipulating
rdbesdataobjects</a></li>
<li><a href="v02a-generating-probabilities.html">v02a generating
probabilities</a></li>
<li><a href="v02b-Generating-zeros-for-species-not-observed.html">v02b
Generating zeros for species not observed</a></li>
<li><a href="v02c-Generating-NAs-for-species-not-targeted-by-sampling.html">v02c
Generating NAs for species not targeted by sampling</a></li>
<li><a href="v02d-update-SA-with-taxon-from-SL.html">v02d update SA with
taxon from SL</a></li>
<li><a href="v03a-Estimating-population-parameters-unbiased-estimator.html">v03a
Estimating population parameters unbiased estimator</a></li>
<li><a href="v03b-Estimating-population-parameters-ratio-estimator.html">v03b
Estimating population parameters ratio estimator</a></li>
<li><a href="v04-Create-IC-format-from-estimation-results.html">v04
Create IC format from estimation results</a></li>
</ul>
<p>#END</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Colin Millar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
