<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raw Data Import • RDBEScore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Raw Data Import">
<meta property="og:description" content="RDBEScore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RDBEScore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/estimating-rdbesdataobjects.html">Estimating Population parameters from RDBESDataObjects</a>
    </li>
    <li>
      <a href="../articles/generating-NAs-using-the-species-list.html">Generating NAs using the Species List</a>
    </li>
    <li>
      <a href="../articles/generating-probabilities.html">Generating probabilities</a>
    </li>
    <li>
      <a href="../articles/generating-zeros-using-the-species-list.html">Generating Zeros using the Species List</a>
    </li>
    <li>
      <a href="../articles/manipulating-rdbesdataobjects.html">Manipulating RDBESDataObjects</a>
    </li>
    <li>
      <a href="../articles/raw-data-import.html">Raw Data Import</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ices-tools-dev/RDBEScore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Raw Data Import</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ices-tools-dev/RDBEScore/blob/HEAD/vignettes/raw-data-import.Rmd" class="external-link"><code>vignettes/raw-data-import.Rmd</code></a></small>
      <div class="hidden name"><code>raw-data-import.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of this document is to outline the basic workflow of
importing data downloaded from the <a href="https://rdbes.ices.dk/#/" class="external-link">ICES Regional Database &amp; Estimation
System (RDBES)</a> or a <code>list</code> object containing data frames
(or data.tables) into <code>R</code> using the <code>RDBEScore</code>
package.</p>
<p>The function <strong>createRDBESDataObject</strong> is intended to
directly import Commercial Landing (CL), Commercial Effort (CE) and
Commercial Sampling (CS) tables downloaded from <a href="https://rdbes.ices.dk/#/" class="external-link">RDBES</a>.</p>
</div>
<div class="section level2">
<h2 id="load-the-package">Load the package<a class="anchor" aria-label="anchor" href="#load-the-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ices-tools-dev/RDBEScore" class="external-link">RDBEScore</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-zipped-files">Importing zipped files<a class="anchor" aria-label="anchor" href="#importing-zipped-files"></a>
</h2>
<p>It can directly import the <code>.zip</code> archive from the RDBES
download containing all mandatory hierarchy tables plus VD and SL:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedH1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"./vignetteData/H1_2023_10_16.zip"</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedH1</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedH1</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "DE" "SD" "VS" "FT" "FO" "SS" "SA" "FM" "BV" "VD" "SL"</span></span></code></pre></div>
<p>The easiest way to get a glimpse of the imported data hierarchy and
single table row counts is just to print it. The information also
includes the range of number sampled and number total for each table
together with the selection method and number of rows.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#calls the print function </span></span>
<span><span class="va">importedH1</span></span>
<span><span class="co">#&gt; Hierarchy 1 RDBESdataObject:</span></span>
<span><span class="co">#&gt;  DE: 8</span></span>
<span><span class="co">#&gt;  SD: 8</span></span>
<span><span class="co">#&gt;  VS: 1214 (SRSWOR,CENSUS,SRSWR: 2-135/4-1382)</span></span>
<span><span class="co">#&gt;  FT: 1430 (CENSUS,SRSWR: 1-3/1-100)</span></span>
<span><span class="co">#&gt;  FO: 1916 (CENSUS,SRSWR: 1-3/1-20)</span></span>
<span><span class="co">#&gt;  SS: 1916 (CENSUS,SRSWR: 1/1-4)</span></span>
<span><span class="co">#&gt;  SA: 1916 (CENSUS,SRSWR: 1/1-2)</span></span>
<span><span class="co">#&gt;  FM: 7290</span></span>
<span><span class="co">#&gt;  BV: 14580 (SRSWR: 2/2)</span></span>
<span><span class="co">#&gt;  VD: 311</span></span>
<span><span class="co">#&gt;  SL: 170</span></span></code></pre></div>
<p>It can import the CL, CE, VD or SL tables <code>.zip</code> archives,
but will include all other tables as <code>NULL</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedSL</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"./vignetteData/HSL_2023_10_16.zip"</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="va">importedSL</span></span>
<span><span class="co">#&gt; No hierarchy, RDBESdataObject:</span></span>
<span><span class="co">#&gt;  SL: 170</span></span></code></pre></div>
<p>It can also handle overwriting <code>zip</code> file original files
with files appearing later in the list. However each overwrite results
in a warning!</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importFiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"./vignetteData/HSL_2023_10_16.zip"</span>,</span>
<span>                 <span class="st">"./vignetteData/H1_2023_10_16.zip"</span><span class="op">)</span></span>
<span><span class="va">importedTables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">importFiles</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in FUN(X[[i]], ...): Duplicate unzipped files detected:</span></span>
<span><span class="co">#&gt;  SpeciesList.csv</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedTables</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedTables</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "DE" "SD" "VS" "FT" "FO" "SS" "SA" "FM" "BV" "VD" "SL"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-csv-files">Importing csv files<a class="anchor" aria-label="anchor" href="#importing-csv-files"></a>
</h2>
<p>It can also import the unzipped <code>.csv</code> files with the
default RDBES names:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedVS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span>input <span class="op">=</span> <span class="st">"./vignetteData/"</span>,</span>
<span>                                    listOfFileNames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"VS"</span> <span class="op">=</span> <span class="st">"VesselSelection.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#print the not NULL table names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">importedTables</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">importedTables</span>, <span class="va">is.null</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "DE" "SD" "VS" "FT" "FO" "SS" "SA" "FM" "BV" "VD" "SL"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-list-of-data-frames">Importing list of data frames<a class="anchor" aria-label="anchor" href="#importing-list-of-data-frames"></a>
</h2>
<p>It can also import a <code>list</code> object containing data frames
(or data.tables). However, it should be noted that this type of import
bypasses the RDBES upload data integrity checks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#list of data frames </span></span>
<span><span class="va">listOfDfsH1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"./vignetteData/H1_2023_10_19.rds"</span><span class="op">)</span></span>
<span><span class="co">#print the class of the list elements </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">listOfDfsH1</span>, <span class="va">class</span><span class="op">)</span></span>
<span><span class="co">#&gt;           DE           SD           VS           FT           FO           SS </span></span>
<span><span class="co">#&gt; "data.frame" "data.frame" "data.frame" "data.frame" "data.frame" "data.frame" </span></span>
<span><span class="co">#&gt;           SA           FM           BV           VD           SL </span></span>
<span><span class="co">#&gt; "data.frame" "data.frame" "data.frame" "data.frame" "data.frame"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedList</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span><span class="va">listOfDfsH1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in createRDBESDataObject(listOfDfsH1): NOTE: Creating RDBES data objects from a list of local data frames bypasses the RDBES upload data integrity checks.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="object-class-rdbesdataobject">Object class RDBESDataObject<a class="anchor" aria-label="anchor" href="#object-class-rdbesdataobject"></a>
</h2>
<p>It should be noted that the objects created are of the S3 class
“<strong>RDBESDataObject</strong>”. The class has defined
<strong>print()</strong>, <strong>summary()</strong> and
<strong>sort()</strong> methods. For more info on theese see vignette <a href="manipulating-rdbesdataobjects.html">Manipulating
RDBESDataObjects</a>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">importedTables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createRDBESDataObject.html">createRDBESDataObject</a></span><span class="op">(</span><span class="st">"./vignetteData/H1_2023_10_16.zip"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">importedTables</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "RDBESDataObject" "list"</span></span></code></pre></div>
<div class="section level3">
<h3 id="validate-rdbesdataobject">validate RDBESDataObject<a class="anchor" aria-label="anchor" href="#validate-rdbesdataobject"></a>
</h3>
<p>RDBESDataObject structure can be validated using the
<strong>validateRDBESDataObject()</strong> function.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/validateRDBESDataObject.html">validateRDBESDataObject</a></span><span class="op">(</span><span class="va">importedTables</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Note that TE is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [2] "Note that LO is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [3] "Note that OS is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [4] "Note that LE is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [5] "Note that CL is NULL but this is allowed in an RDBESDataObject"</span></span>
<span><span class="co">#&gt; [6] "Note that CE is NULL but this is allowed in an RDBESDataObject"</span></span></code></pre></div>
<p>To see what you can do with the imported
<strong>RDBESDataObject</strong> see other vignettes like <a href="manipulating-rdbesdataobjects.html">Manipulating
RDBESDataObjects</a>.</p>
<p>Other vignettes:</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Colin Millar.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
