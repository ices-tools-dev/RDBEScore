<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generating probabilities • RDBEScore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Generating probabilities">
<meta property="og:description" content="RDBEScore">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RDBEScore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/estimating-rdbesdataobjects.html">Estimating Population parameters from RDBESDataObjects</a>
    </li>
    <li>
      <a href="../articles/generating-NAs-using-the-species-list.html">Generating NAs using the Species List</a>
    </li>
    <li>
      <a href="../articles/generating-probabilities.html">Generating probabilities</a>
    </li>
    <li>
      <a href="../articles/generating-zeros-using-the-species-list.html">Generating Zeros using the Species List</a>
    </li>
    <li>
      <a href="../articles/manipulating-rdbesdataobjects.html">Manipulating RDBESDataObjects</a>
    </li>
    <li>
      <a href="../articles/raw-data-import.html">Raw Data Import</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ices-tools-dev/RDBEScore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Generating probabilities</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ices-tools-dev/RDBEScore/blob/HEAD/vignettes/generating-probabilities.Rmd" class="external-link"><code>vignettes/generating-probabilities.Rmd</code></a></small>
      <div class="hidden name"><code>generating-probabilities.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of this document is to illustrate how to automatically
generate some types of sample probabilities using functions
<code>runChecksOnSelectionAndProbs</code> and
<code>applyGenerateProbs</code> of the <code>RDBEScore</code>
package.</p>
</div>
<div class="section level2">
<h2 id="load-the-package">Load the package<a class="anchor" aria-label="anchor" href="#load-the-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ices-tools-dev/RDBEScore" class="external-link">RDBEScore</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="main-data-requirements-to-generate-probabilities">main data requirements to generate probabilities<a class="anchor" aria-label="anchor" href="#main-data-requirements-to-generate-probabilities"></a>
</h2>
<p><code>RDBEScore</code> currently only provides probability generation
for selection method “SRSWR”,“SRSWOR” and “CENSUS”. Also, to
automatically generate probabilities, it is necessary that
<code>numTotal</code> and <code>numSamp</code> are declared in every
sampling table. Functions are also only configured to handle for cases
where “clustering==”N”. If that is not the case, changes need to be made
to the data before running the functions. Such changes configure
significant assumptions that should be left well visible in the data
preparation section of any estimation script.</p>
</div>
<div class="section level2">
<h2 id="load-and-validate-some-example-data">Load and validate some example data<a class="anchor" aria-label="anchor" href="#load-and-validate-some-example-data"></a>
</h2>
<p>First we’ll load some example data from the RDBES and check it’s
valid. It’s a good tip to check your RDBESDataObjects are valid after
any manipulations you perform. See how to import your own data in the
vignette <a href="raw-data-import.html">Import RDBES data</a> In this
vignette package example data pre-loaded with <code>RDBEScore</code> is
used.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># load some H1 test data</span></span>
<span><span class="va">myH1DataObject</span> <span class="op">&lt;-</span> <span class="va">H1Example</span></span>
<span>     </span>
<span><span class="co"># filter data for DEstratumName==DE_stratum1_H1 to make object smaller and easier to handle</span></span>
<span><span class="va">myH1DataObject</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterAndTidyRDBESDataObject.html">filterAndTidyRDBESDataObject</a></span><span class="op">(</span><span class="va">myH1DataObject</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DEstratumName"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DE_stratum1_H1"</span><span class="op">)</span>,</span>
<span>                                               killOrphans<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The functions that generate probabilities do not yet deal with lower
hierarchies A and B so we rework a bit the data so it looks like lower
hierarchy C.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Temp fixes to change data to lower hierarchy C - function won't deal with A, or B yet</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span>, <span class="va">FMid</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BVid"</span>,<span class="st">"FMid"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                         <span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FM"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FMid"</span>,<span class="st">"SAid"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                         by<span class="op">=</span><span class="st">"FMid"</span><span class="op">)</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">SAid</span> <span class="op">&lt;-</span> <span class="va">temp</span><span class="op">$</span><span class="va">SAid</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">FMid</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"SA"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">SAlowHierarchy</span> <span class="op">&lt;-</span> <span class="st">"C"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">BVnumTotal</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">BVnumSamp</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="co"># reworking stratification of VS table</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_5"</span>,<span class="st">"VDcode_8"</span>,<span class="st">"VDcode_9"</span><span class="op">)</span><span class="op">]</span><span class="op">$</span><span class="va">VSstratumName</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"VS_stratum1"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_5"</span>,<span class="st">"VDcode_8"</span>,<span class="st">"VDcode_9"</span><span class="op">)</span><span class="op">]</span><span class="op">$</span><span class="va">VSnumTotal</span> <span class="op">&lt;-</span> <span class="fl">30</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_6"</span>,<span class="st">"VDcode_7"</span>,<span class="st">"VDcode_10"</span><span class="op">)</span><span class="op">]</span><span class="op">$</span><span class="va">VSstratumName</span> <span class="op">&lt;-</span> </span>
<span>  <span class="st">"VS_stratum2"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">VSstratumName</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"VS_stratum1"</span>,<span class="op">]</span><span class="op">$</span><span class="va">VSnumSamp</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">VSstratumName</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"VS_stratum2"</span>,<span class="op">]</span><span class="op">$</span><span class="va">VSnumSamp</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span></span>
<span><span class="co"># reworking FT table</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">FTselectMeth</span> <span class="op">&lt;-</span> <span class="st">"SRSWOR"</span></span>
<span></span>
<span><span class="va">tmp</span><span class="op">&lt;-</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span><span class="op">&lt;-</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">VSencrVessCode</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">VSid</span>,</span>
<span>                                                                <span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">VSid</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">tmp</span><span class="op">$</span><span class="va">FTnumSamp</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span>, </span>
<span>                                                           <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_5"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">100</span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_6"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">50</span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_7"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">25</span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_8"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">80</span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_9"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">70</span></span>
<span><span class="va">tmp</span><span class="op">[</span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VDcode_10"</span><span class="op">)</span>,<span class="op">]</span><span class="op">$</span><span class="va">FTnumTotal</span><span class="op">&lt;-</span><span class="fl">60</span></span>
<span></span>
<span><span class="va">tmp</span><span class="op">$</span><span class="va">VSencrVessCode</span><span class="op">&lt;-</span><span class="cn">NULL</span></span>
<span></span>
<span><span class="va">tmp</span><span class="op">$</span><span class="va">FTstratumName</span><span class="op">&lt;-</span><span class="st">"U"</span></span>
<span><span class="va">tmp</span><span class="op">$</span><span class="va">FTstratification</span><span class="op">&lt;-</span><span class="st">"N"</span></span>
<span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span><span class="op">&lt;-</span><span class="va">tmp</span></span>
<span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FO"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">FOselectMeth</span><span class="op">&lt;-</span><span class="st">"SRSWOR"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">$</span><span class="va">SA</span><span class="op">$</span><span class="va">SAselectMeth</span><span class="op">&lt;-</span><span class="st">"SRSWOR"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">$</span><span class="va">SS</span><span class="op">$</span><span class="va">SSselectMeth</span><span class="op">&lt;-</span><span class="st">"SRSWOR"</span></span>
<span><span class="va">myH1DataObject</span><span class="op">$</span><span class="va">BV</span><span class="op">$</span><span class="va">BVselectMeth</span><span class="op">&lt;-</span><span class="st">"SRSWOR"</span></span>
<span></span>
<span><span class="co"># confirm validity</span></span>
<span><span class="fu"><a href="../reference/validateRDBESDataObject.html">validateRDBESDataObject</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-closer-look-at-the-example-data">A closer look at the example data<a class="anchor" aria-label="anchor" href="#a-closer-look-at-the-example-data"></a>
</h2>
<p>The final data contains 10 ages in each of 243 hauls sampled from 81
trips done by 9 selected vessels.</p>
<p>Examining the selection methods used in the VS table it is visible
that the 9 vessels were selected with replacement (SRSWR) out of two
strata, one strata with a total of 30 vessels (VS_stratum1) and one with
a total of 60 vessels (VS_stratum2). It is also noticeable that
selection and inclusion probabilities were not declared during
upload.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSstratification"</span>,<span class="st">"VSstratumName"</span>,<span class="st">"VSselectMeth"</span>,</span>
<span>                                 <span class="st">"VSnumTotal"</span>,<span class="st">"VSnumSamp"</span>,<span class="st">"VSselProb"</span>,<span class="st">"VSincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;    VSstratification VSstratumName VSselectMeth VSnumTotal VSnumSamp VSselProb</span></span>
<span><span class="co">#&gt; 1:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 2:                Y   VS_stratum2        SRSWR         60         4        NA</span></span>
<span><span class="co">#&gt;    VSincProb</span></span>
<span><span class="co">#&gt; 1:        NA</span></span>
<span><span class="co">#&gt; 2:        NA</span></span></code></pre></div>
<p>With regards to trips these were selected without replacement
(SRSWOR). either 9 or 18 trips were selected from each vessel.
Individual vessels registered total number of trips between 25 and 100
trips. We also see that selection and inclusion probabilities were not
declared.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSid"</span>,<span class="st">"FTstratification"</span>,<span class="st">"FTstratumName"</span>,<span class="st">"FTselectMeth"</span>,</span>
<span>                                 <span class="st">"FTnumTotal"</span>,<span class="st">"FTnumSamp"</span>,<span class="st">"FTselProb"</span>,<span class="st">"FTincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;     VSid FTstratification FTstratumName FTselectMeth FTnumTotal FTnumSamp</span></span>
<span><span class="co">#&gt; 1: 78006                N             U       SRSWOR        100        18</span></span>
<span><span class="co">#&gt; 2: 78007                N             U       SRSWOR         80        18</span></span>
<span><span class="co">#&gt; 3: 78008                N             U       SRSWOR         70         9</span></span>
<span><span class="co">#&gt; 4: 78009                N             U       SRSWOR         60         9</span></span>
<span><span class="co">#&gt; 5: 78010                N             U       SRSWOR         50        18</span></span>
<span><span class="co">#&gt; 6: 78011                N             U       SRSWOR         50        18</span></span>
<span><span class="co">#&gt; 7: 78012                N             U       SRSWOR        100        18</span></span>
<span><span class="co">#&gt; 8: 78013                N             U       SRSWOR         80        18</span></span>
<span><span class="co">#&gt; 9: 78014                N             U       SRSWOR         25         9</span></span>
<span><span class="co">#&gt;    FTselProb FTincProb</span></span>
<span><span class="co">#&gt; 1:        NA        NA</span></span>
<span><span class="co">#&gt; 2:        NA        NA</span></span>
<span><span class="co">#&gt; 3:        NA        NA</span></span>
<span><span class="co">#&gt; 4:        NA        NA</span></span>
<span><span class="co">#&gt; 5:        NA        NA</span></span>
<span><span class="co">#&gt; 6:        NA        NA</span></span>
<span><span class="co">#&gt; 7:        NA        NA</span></span>
<span><span class="co">#&gt; 8:        NA        NA</span></span>
<span><span class="co">#&gt; 9:        NA        NA</span></span></code></pre></div>
<p>With regards to hauls the example data indicates that 20 were done in
every trip(!) from which 3 were sampled. Not very likely data, but good
enough for demonstration purposes. Also here we see that selection and
inclusion probabilities were not declared.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FO"</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">FTid</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 21677 21678 21679 21680 21681 21682 21683 21684 21685 21686 21687 21688 21689 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21690 21691 21692 21693 21694 21695 21696 21697 21698 21699 21700 21701 21702 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21703 21704 21705 21706 21707 21708 21709 21710 21711 21712 21713 21714 21715 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21716 21717 21718 21719 21720 21721 21722 21723 21724 21725 21726 21727 21728 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21729 21730 21731 21732 21733 21734 21735 21736 21737 21738 21739 21740 21741 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21742 21743 21744 21745 21746 21747 21748 21749 21750 21751 21752 21753 21754 </span></span>
<span><span class="co">#&gt;     3     3     3     3     3     3     3     3     3     3     3     3     3 </span></span>
<span><span class="co">#&gt; 21755 21756 21757 </span></span>
<span><span class="co">#&gt;     3     3     3</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"FO"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FOid"</span>,<span class="st">"FOstratification"</span>,<span class="st">"FOstratumName"</span>,<span class="st">"FOselectMeth"</span>,</span>
<span>                                 <span class="st">"FOnumTotal"</span>,<span class="st">"FOnumSamp"</span>,<span class="st">"FOselProb"</span>,<span class="st">"FOincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;       FOid FOstratification FOstratumName FOselectMeth FOnumTotal FOnumSamp</span></span>
<span><span class="co">#&gt;   1: 68983                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;   2: 68984                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;   3: 68985                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;   4: 68986                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;   5: 68987                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;  ---                                                                       </span></span>
<span><span class="co">#&gt; 239: 69221                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt; 240: 69222                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt; 241: 69223                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt; 242: 69224                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt; 243: 69225                N             U       SRSWOR         20         3</span></span>
<span><span class="co">#&gt;      FOselProb FOincProb</span></span>
<span><span class="co">#&gt;   1:        NA        NA</span></span>
<span><span class="co">#&gt;   2:        NA        NA</span></span>
<span><span class="co">#&gt;   3:        NA        NA</span></span>
<span><span class="co">#&gt;   4:        NA        NA</span></span>
<span><span class="co">#&gt;   5:        NA        NA</span></span>
<span><span class="co">#&gt;  ---                    </span></span>
<span><span class="co">#&gt; 239:        NA        NA</span></span>
<span><span class="co">#&gt; 240:        NA        NA</span></span>
<span><span class="co">#&gt; 241:        NA        NA</span></span>
<span><span class="co">#&gt; 242:        NA        NA</span></span>
<span><span class="co">#&gt; 243:        NA        NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-probabilities-for-only-one-table-generateprobs">generating probabilities for only one table:
<code>generateProbs</code><a class="anchor" aria-label="anchor" href="#generating-probabilities-for-only-one-table-generateprobs"></a>
</h2>
<p>To generate probabilities for one of the tables choose what type of
probabilities you want to generate (“selection” or “inclusion”) and run
<code>generateProbs</code>.</p>
<p>note: To check the data for some issues related to selection methods
and probabilities, you can run function
<code>runChecksOnSelectionAndProbs</code>. But in general this is not
necessary because when you run <code>applyGenerateProbs</code> with
defaults a call to <code>runChecksOnSelectionAndProbs</code> is
included.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myH1DataObject_uptde</span><span class="op">&lt;-</span><span class="va">myH1DataObject</span></span>
<span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateProbs.html">generateProbs</a></span><span class="op">(</span><span class="va">myH1DataObject</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                                              probType<span class="op">=</span><span class="st">"inclusion"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "SRSWR"</span></span>
<span><span class="co"># display changes</span></span>
<span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSstratification"</span>,<span class="st">"VSstratumName"</span>,<span class="st">"VSselectMeth"</span>,</span>
<span>                                <span class="st">"VSnumTotal"</span>,<span class="st">"VSnumSamp"</span>,<span class="st">"VSselProb"</span>,<span class="st">"VSincProb"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;    VSstratification VSstratumName VSselectMeth VSnumTotal VSnumSamp VSselProb</span></span>
<span><span class="co">#&gt; 1:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 2:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 3:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 4:                Y   VS_stratum2        SRSWR         60         4        NA</span></span>
<span><span class="co">#&gt; 5:                Y   VS_stratum2        SRSWR         60         4        NA</span></span>
<span><span class="co">#&gt; 6:                Y   VS_stratum2        SRSWR         60         4        NA</span></span>
<span><span class="co">#&gt; 7:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 8:                Y   VS_stratum1        SRSWR         30         5        NA</span></span>
<span><span class="co">#&gt; 9:                Y   VS_stratum2        SRSWR         60         4        NA</span></span>
<span><span class="co">#&gt;     VSincProb</span></span>
<span><span class="co">#&gt; 1: 0.15591979</span></span>
<span><span class="co">#&gt; 2: 0.15591979</span></span>
<span><span class="co">#&gt; 3: 0.15591979</span></span>
<span><span class="co">#&gt; 4: 0.06501844</span></span>
<span><span class="co">#&gt; 5: 0.06501844</span></span>
<span><span class="co">#&gt; 6: 0.06501844</span></span>
<span><span class="co">#&gt; 7: 0.15591979</span></span>
<span><span class="co">#&gt; 8: 0.15591979</span></span>
<span><span class="co">#&gt; 9: 0.06501844</span></span>
<span></span>
<span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generateProbs.html">generateProbs</a></span><span class="op">(</span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                                              probType<span class="op">=</span><span class="st">"selection"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "SRSWR"</span></span>
<span><span class="co"># display changes</span></span>
<span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSstratification"</span>,<span class="st">"VSstratumName"</span>,<span class="st">"VSselectMeth"</span>,</span>
<span>                                <span class="st">"VSnumTotal"</span>,<span class="st">"VSnumSamp"</span>,<span class="st">"VSselProb"</span>,<span class="st">"VSincProb"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;    VSstratification VSstratumName VSselectMeth VSnumTotal VSnumSamp  VSselProb</span></span>
<span><span class="co">#&gt; 1:                Y   VS_stratum1        SRSWR         30         5 0.03333333</span></span>
<span><span class="co">#&gt; 2:                Y   VS_stratum1        SRSWR         30         5 0.03333333</span></span>
<span><span class="co">#&gt; 3:                Y   VS_stratum1        SRSWR         30         5 0.03333333</span></span>
<span><span class="co">#&gt; 4:                Y   VS_stratum2        SRSWR         60         4 0.01666667</span></span>
<span><span class="co">#&gt; 5:                Y   VS_stratum2        SRSWR         60         4 0.01666667</span></span>
<span><span class="co">#&gt; 6:                Y   VS_stratum2        SRSWR         60         4 0.01666667</span></span>
<span><span class="co">#&gt; 7:                Y   VS_stratum1        SRSWR         30         5 0.03333333</span></span>
<span><span class="co">#&gt; 8:                Y   VS_stratum1        SRSWR         30         5 0.03333333</span></span>
<span><span class="co">#&gt; 9:                Y   VS_stratum2        SRSWR         60         4 0.01666667</span></span>
<span><span class="co">#&gt;     VSincProb</span></span>
<span><span class="co">#&gt; 1: 0.15591979</span></span>
<span><span class="co">#&gt; 2: 0.15591979</span></span>
<span><span class="co">#&gt; 3: 0.15591979</span></span>
<span><span class="co">#&gt; 4: 0.06501844</span></span>
<span><span class="co">#&gt; 5: 0.06501844</span></span>
<span><span class="co">#&gt; 6: 0.06501844</span></span>
<span><span class="co">#&gt; 7: 0.15591979</span></span>
<span><span class="co">#&gt; 8: 0.15591979</span></span>
<span><span class="co">#&gt; 9: 0.06501844</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generating-probabilities-for-an-entire-rdbes-data-object-applygenerateprobs">generating probabilities for an entire RDBES data object:
<code>applyGenerateProbs</code><a class="anchor" aria-label="anchor" href="#generating-probabilities-for-an-entire-rdbes-data-object-applygenerateprobs"></a>
</h2>
<p>The function <code>applyGenerateProbs</code> generates selection or
inclusion probabilities for all selection tables of an RDBES data object
in one go. Here, we avoid running the checks by setting
<code>runInitialProbChecks</code> to FALSE.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">myH1DataObject_uptde</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/applyGenerateProbs.html">applyGenerateProbs</a></span> <span class="op">(</span>x <span class="op">=</span> <span class="va">myH1DataObject</span></span>
<span>                                      , probType <span class="op">=</span> <span class="st">"inclusion"</span></span>
<span>                                      , overwrite<span class="op">=</span><span class="cn">T</span></span>
<span>                                      , runInitialProbChecks <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/validateRDBESDataObject.html">validateRDBESDataObject</a></span><span class="op">(</span><span class="va">myH1DataObject_uptde</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># display changes</span></span>
<span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"VS"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSstratification"</span>,<span class="st">"VSstratumName"</span>,<span class="st">"VSselectMeth"</span>,</span>
<span>                                <span class="st">"VSnumTotal"</span>,<span class="st">"VSnumSamp"</span>,<span class="st">"VSselProb"</span>,<span class="st">"VSincProb"</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"FT"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VSid"</span>,<span class="st">"FTstratification"</span>,<span class="st">"FTstratumName"</span>,</span>
<span>                                       <span class="st">"FTselectMeth"</span>,<span class="st">"FTnumTotal"</span>,<span class="st">"FTnumSamp"</span>,<span class="st">"FTselProb"</span>,<span class="st">"FTincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"FO"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FOid"</span>,<span class="st">"FOstratification"</span>,<span class="st">"FOstratumName"</span>,</span>
<span>                                       <span class="st">"FOselectMeth"</span>,<span class="st">"FOnumTotal"</span>,<span class="st">"FOnumSamp"</span>,<span class="st">"FOselProb"</span>,<span class="st">"FOincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">myH1DataObject_uptde</span><span class="op">[[</span><span class="st">"BV"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BVid"</span>,<span class="st">"BVfishId"</span>,<span class="st">"BVselectMeth"</span>,<span class="st">"BVnumTotal"</span>,</span>
<span>                                       <span class="st">"BVnumSamp"</span>,<span class="st">"BVselProb"</span>,<span class="st">"BVincProb"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>We could use <code>probType = "selection"</code> to further complete
the data with selection probabilities. However, selection method in
table FT is SRSWOR and so the <code>applyGenerateProbs</code> issues an
error (see ?applyGenerateProbs for more details)</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">myH1DataObject_uptde</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/applyGenerateProbs.html">applyGenerateProbs</a></span> <span class="op">(</span>x <span class="op">=</span> <span class="va">myH1DataObject_uptde</span></span>
<span>                                      , probType <span class="op">=</span> <span class="st">"selection"</span></span>
<span>                                      , overwrite<span class="op">=</span><span class="cn">T</span></span>
<span>                                      , runInitialProbChecks <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "========start generateProbs======="</span></span>
<span><span class="co">#&gt; [1] "VS"</span></span>
<span><span class="co">#&gt; [1] "SDid: 5438"</span></span>
<span><span class="co">#&gt; [1] "SRSWR"</span></span>
<span><span class="co">#&gt; [1] "FT"</span></span>
<span><span class="co">#&gt; [1] "VSid: 78006"</span></span>
<span><span class="co">#&gt; [1] "SRSWOR"</span></span>
<span><span class="co">#&gt; Error in generateProbs(x, probType): depends on order</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-overwrite-argument">The <code>overwrite</code> argument<a class="anchor" aria-label="anchor" href="#the-overwrite-argument"></a>
</h2>
<p>To be completed</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Colin Millar.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
