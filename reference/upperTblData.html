<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get Field from Upper Table — upperTblData • RDBEScore</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get Field from Upper Table — upperTblData"><meta name="description" content="This function gets a field from an upper table using a list of tables for any
row. It takes four arguments: field, values, tbls, and level. The
function checks if the start of the provided field matches the provided level.
If it does, the function returns the rows from the corresponding table in the
provided list of tables that have the provided values for the specified field.
Otherwise, the function finds the previous table in the list of tables and
gets the values for its id column that match the provided values for the
specified field. The function then calls itself recursively with these new
values and returns the result.
NB! running on the RDBESDataObject will work properly if it is sorted by default the tables are not
in the correct order for a spesific hierarchy."><meta property="og:description" content="This function gets a field from an upper table using a list of tables for any
row. It takes four arguments: field, values, tbls, and level. The
function checks if the start of the provided field matches the provided level.
If it does, the function returns the rows from the corresponding table in the
provided list of tables that have the provided values for the specified field.
Otherwise, the function finds the previous table in the list of tables and
gets the values for its id column that match the provided values for the
specified field. The function then calls itself recursively with these new
values and returns the result.
NB! running on the RDBESDataObject will work properly if it is sorted by default the tables are not
in the correct order for a spesific hierarchy."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RDBEScore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v01a-data-import.html">01a Data import</a></li>
    <li><a class="dropdown-item" href="../articles/v01b-manipulating-rdbesdataobjects.html">01b Manipulating RDBESDataObjects</a></li>
    <li><a class="dropdown-item" href="../articles/v02a-generating-probabilities.html">02a Generating probabilities</a></li>
    <li><a class="dropdown-item" href="../articles/v02b-Generating-zeros-for-species-not-observed.html">02b Generating zeros for species not observed</a></li>
    <li><a class="dropdown-item" href="../articles/v02c-Generating-NAs-for-species-not-targeted-by-sampling.html">02c Generating NAs for species not targeted by sampling</a></li>
    <li><a class="dropdown-item" href="../articles/v02d-update-SA-with-taxon-from-SL.html">02d Update SA with taxon from SL</a></li>
    <li><a class="dropdown-item" href="../articles/v03a-Estimating-population-parameters-unbiased-estimator.html">03a Estimating population parameters: unbiased estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v03b-Estimating-population-parameters-ratio-estimator.html">03b Estimating population parameters: ratio estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v04-Create-IC-format-from-estimation-results.html">04 Create IC format from estimation results</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ices-tools-dev/RDBEScore/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Get Field from Upper Table</h1>
      <small class="dont-index">Source: <a href="https://github.com/ices-tools-dev/RDBEScore/blob/main/R/upperTblData.R" class="external-link"><code>R/upperTblData.R</code></a></small>
      <div class="d-none name"><code>upperTblData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function gets a field from an upper table using a list of tables for any
row. It takes four arguments: <code>field</code>, <code>values</code>, <code>tbls</code>, and <code>level</code>. The
function checks if the start of the provided field matches the provided level.
If it does, the function returns the rows from the corresponding table in the
provided list of tables that have the provided values for the specified field.
Otherwise, the function finds the previous table in the list of tables and
gets the values for its <code>id</code> column that match the provided values for the
specified field. The function then calls itself recursively with these new
values and returns the result.
NB! running on the RDBESDataObject will work properly if it is sorted by default the tables are not
in the correct order for a spesific hierarchy.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">upperTblData</span><span class="op">(</span><span class="va">field</span>, <span class="va">values</span>, <span class="va">tbls</span>, <span class="va">level</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-field">field<a class="anchor" aria-label="anchor" href="#arg-field"></a></dt>
<dd><p>A character string specifying the field to get.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>A vector of values to match for the specified field.</p></dd>


<dt id="arg-tbls">tbls<a class="anchor" aria-label="anchor" href="#arg-tbls"></a></dt>
<dd><p>A named list of data frames containing tables at different levels.</p></dd>


<dt id="arg-level">level<a class="anchor" aria-label="anchor" href="#arg-level"></a></dt>
<dd><p>A character string specifying the level to get data from.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>(Optional) Set to TRUE if you want informative text printed</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing rows from an upper table that match the
provided values for the specified field.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># it is important to run these functions only on sorted RDBESDataObject</span></span></span>
<span class="r-in"><span><span class="fu">RDBEScore</span><span class="fu">:::</span><span class="fu">upperTblData</span><span class="op">(</span><span class="st">"SAid"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">H8ExampleEE1</span><span class="op">)</span>, <span class="st">"DE"</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "SA: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "SS: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "LE: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Skipping: FT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "VS: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "TE: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "SD: 1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;DEid&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DEid DErecType      DEsampScheme DEsampSchemeType DEyear DEstratumName</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt;    &lt;char&gt;            &lt;char&gt;           &lt;char&gt;  &lt;num&gt;        &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1        DE CommertialPelagic         NatRouCF   2022          28.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DEhierarchyCor DEhierarchy DEsamp DEnoSampReason DEnonResponseCollected</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;char&gt;       &lt;num&gt; &lt;char&gt;         &lt;lgcl&gt;                 &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:              Y           8      Y             NA                      N</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    DEauxVarTot DEauxVarValue DEauxVarName DEauxVarUnit</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;lgcl&gt;        &lt;lgcl&gt;       &lt;lgcl&gt;       &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:          NA            NA           NA           NA</span>
<span class="r-in"><span><span class="va">DE</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>DEid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">SD</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>SDid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, DEid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">VS</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></span><span class="op">(</span>VSid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,SDid <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>,  value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>DE <span class="op">=</span> <span class="va">DE</span>, SD <span class="op">=</span> <span class="va">SD</span>, VS <span class="op">=</span> <span class="va">VS</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">RDBEScore</span><span class="fu">:::</span><span class="fu">upperTblData</span><span class="op">(</span><span class="st">"VSid"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="va">tbls</span>, <span class="st">"DE"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DEid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Colin Millar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

