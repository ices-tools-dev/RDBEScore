<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate Catch at Number (CANUM) for Biological Variables — doBVestimCANUM • RDBEScore</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate Catch at Number (CANUM) for Biological Variables — doBVestimCANUM"><meta name="description" content='This function estimates catch at number (CANUM) for a specified biological variable, such as age or length. It aggregates data based on specified columns and generates a "plus group" for the highest value in the defined classes. The function supports grouping by various units (e.g., age, length, weight) and calculates required indices, totals, and proportions for the groups.'><meta property="og:description" content='This function estimates catch at number (CANUM) for a specified biological variable, such as age or length. It aggregates data based on specified columns and generates a "plus group" for the highest value in the defined classes. The function supports grouping by various units (e.g., age, length, weight) and calculates required indices, totals, and proportions for the groups.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">RDBEScore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v01a-data-import.html">01a Data import</a></li>
    <li><a class="dropdown-item" href="../articles/v01b-manipulating-rdbesdataobjects.html">01b Manipulating RDBESDataObjects</a></li>
    <li><a class="dropdown-item" href="../articles/v02a-generating-probabilities.html">02a Generating probabilities</a></li>
    <li><a class="dropdown-item" href="../articles/v02b-Generating-zeros-for-species-not-observed.html">02b Generating zeros for species not observed</a></li>
    <li><a class="dropdown-item" href="../articles/v02c-Generating-NAs-for-species-not-targeted-by-sampling.html">02c Generating NAs for species not targeted by sampling</a></li>
    <li><a class="dropdown-item" href="../articles/v02d-update-SA-with-taxon-from-SL.html">02d Update SA with taxon from SL</a></li>
    <li><a class="dropdown-item" href="../articles/v03a-Estimating-population-parameters-unbiased-estimator.html">03a Estimating population parameters: unbiased estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v03b-Estimating-population-parameters-ratio-estimator.html">03b Estimating population parameters: ratio estimator</a></li>
    <li><a class="dropdown-item" href="../articles/v04-Create-IC-format-from-estimation-results.html">04 Create IC format from estimation results</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ices-tools-dev/RDBEScore/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Estimate Catch at Number (CANUM) for Biological Variables</h1>
      <small class="dont-index">Source: <a href="https://github.com/ices-tools-dev/RDBEScore/blob/main/R/doBVestimCACNUM.R" class="external-link"><code>R/doBVestimCACNUM.R</code></a></small>
      <div class="d-none name"><code>doBVestimCANUM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function estimates catch at number (CANUM) for a specified biological variable, such as age or length. It aggregates data based on specified columns and generates a "plus group" for the highest value in the defined classes. The function supports grouping by various units (e.g., age, length, weight) and calculates required indices, totals, and proportions for the groups.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">doBVestimCANUM</span><span class="op">(</span></span>
<span>  <span class="va">bv</span>,</span>
<span>  <span class="va">addColumns</span>,</span>
<span>  classUnits <span class="op">=</span> <span class="st">"Ageyear"</span>,</span>
<span>  classBreaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-bv">bv<a class="anchor" aria-label="anchor" href="#arg-bv"></a></dt>
<dd><p>A <code>data.table</code> containing biological data, with columns for the biological variable, class units (e.g., <code>Ageyear</code>, <code>Lengthmm</code>, <code>Weightg</code>), and other relevant variables.</p></dd>


<dt id="arg-addcolumns">addColumns<a class="anchor" aria-label="anchor" href="#arg-addcolumns"></a></dt>
<dd><p>A character vector of additional column names used to group the data for aggregation (e.g., <code>BVfishId</code> and other identifiers).</p></dd>


<dt id="arg-classunits">classUnits<a class="anchor" aria-label="anchor" href="#arg-classunits"></a></dt>
<dd><p>A character string specifying the class units of the biological variable to use for grouping (e.g., "Ageyear", "Lengthmm", "Weightg"). Default is "Ageyear".</p></dd>


<dt id="arg-classbreaks">classBreaks<a class="anchor" aria-label="anchor" href="#arg-classbreaks"></a></dt>
<dd><p>A numeric vector specifying the breakpoints for classifying the biological variable. The last value defines the lower bound of the "plus group". Default is <code>1:8</code> for age groups.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical, if <code>TRUE</code>, prints detailed information about the process. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.table</code> containing the aggregated results, including groupings, calculated means, proportions, indices, and totals for the specified biological variable.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ul><li><p>Validates the presence of the <code>classUnits</code> in the biological variable data.</p></li>
<li><p>Reshapes the input data using <code>dcast</code> and groups the biological variable into classes using <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut()</a></code>.</p></li>
<li><p>Aggregates mean weights and lengths by the defined classes, along with calculating proportions and indices based on the sample size.</p></li>
<li><p>A "plus group" is created for values exceeding the highest <code>classBreaks</code> value.</p></li>
<li><p>Calculates total weights, catch numbers, and performs a sanity check to ensure there are no rounding errors in the final results.</p></li>
</ul><div class="section">
<h3 id="mathematical-logic-">Mathematical Logic:<a class="anchor" aria-label="anchor" href="#mathematical-logic-"></a></h3>


<p>Let:</p><ul><li><p>\(W_{mean}\) be the mean weight for each group.</p></li>
<li><p>\(L_{mean}\) be the mean length for each group.</p></li>
<li><p>\(n_W\) be the number of weight measurements in each group.</p></li>
<li><p>\(N\) be the total number of measurements in the sample.</p></li>
<li><p>\(P\) be the proportion of the sample represented by each group.</p></li>
<li><p>\(I_W\) be the weight index for each group.</p></li>
<li><p>\(S\) be the sum of weight indices across all groups.</p></li>
<li><p>\(C\) be the total catch weight.</p></li>
<li><p>\(T_W\) be the total weight for each group.</p></li>
<li><p>\(C_{num}\) be the total catch number for each group.</p></li>
</ul><p>The calculations are as follows:</p><ol><li><p>Proportion of sample:
$$P = \frac{n_W}{N}$$</p></li>
<li><p>Weight Index:
$$I_W = P \times \left( \frac{W_{mean}}{1000} \right)$$</p></li>
<li><p>Sum of Weight Indices:
$$S = \sum I_W$$</p></li>
<li><p>Total Weight Coefficient:
$$\mathrm{TWCoef} = \frac{C}{S}$$</p></li>
<li><p>Total Weight per Group:
$$T_W = I_W \times \mathrm{TWCoef}$$</p></li>
<li><p>Total Catch Number per Group:
$$C_{num} = \frac{T_W}{\left( \frac{W_{mean}}{1000} \right)}$$</p></li>
</ol></div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Colin Millar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

